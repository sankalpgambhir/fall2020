\newpage
{\large Appendix}
\hrule
\label{appendix}

\textbf{Arduino}
\label{appendix:arduino}

The code uploaded to the Arduino for testing. The function
\texttt{test()} is to make the testing more modular by changing the timed
function once, and added multiple times as required without overhead,
since the \texttt{inline} keyword ensures resolution of calls at compile-time.
The functionality was, however not utilized here in the end.

\lstinputlisting[language=C++]{code/lab1.ino}

\textbf{C++ Timer}
\label{appendix:cpp}

The code used to time the output at a lower level than via the IDE.
The IDE seems to be made fairly efficiently as the results were close.
The output is buffered using the UNIX \texttt{tail} utility, with the \texttt{-f}
indicating \texttt{follow}, checking the stream at intervals provided by \texttt{-s},
or \texttt{sleep}, used as \texttt{1$\mu$s} here for reasonable accuracy. The output 
buffer generated by \texttt{tail} is piped into the C++ program as \texttt{stdin} to
be read the same as any user input. The tests were performed with (an unnecessary)
nanosecond accuracy using a high resolution clock provided by \texttt{std::chrono}.


\lstinputlisting[language=C++]{code/arduino-timer.cc}

\textbf{Results}
\label{appendix:results}

The command used to obtain the output as well as the explicit output.
The first "1 count" may be ignored, as its time is due to the \texttt{curr\_time}
being set outside of the loop. The library \texttt{std::chrono} has been previously
measured to be fast enough to only cause delays of the order of 10ns, so it is 
not a rate limiter here. The tests were stopped at 5k for this case, since they would
take a bit long for more, and don't add much information.

\begin{verbatim}
â–² sankalp .../lab1 tail -f /dev/ttyUSB0 -s 0.000001 | ./arduino-timer.out
    Count 1 : Time 1.05739e+08 ns
    Count 1 : Time 101053 ns
    Count 2 : Time 17291 ns
    Count 3 : Time 1.6937e+09 ns
    Count 4 : Time 6.67496e+07 ns
    Count 5 : Time 3.34086e+07 ns
    Count 10 : Time 1.33625e+08 ns
    Count 20 : Time 2.33841e+08 ns
    Count 30 : Time 3.34033e+08 ns
    Count 40 : Time 4.67719e+08 ns
    Count 50 : Time 5.67789e+08 ns
    Count 100 : Time 1.13591e+09 ns
    Count 200 : Time 2.30494e+09 ns
    Count 300 : Time 3.44066e+09 ns
    Count 400 : Time 4.6101e+09 ns
    Count 500 : Time 5.71234e+09 ns
    Count 1000 : Time 1.14914e+10 ns
    Count 2000 : Time 2.29831e+10 ns
    Count 3000 : Time 3.44411e+10 ns
    Count 4000 : Time 4.59325e+10 ns
    Count 5000 : Time 5.74241e+10 ns
\end{verbatim}

